package com.sist.dao;
import java.io.*;
import java.util.*;

import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;


public class RecipeDAO {
	 // XML파일 읽기
	   private static SqlSessionFactory ssf;
	   // 자동 초기화 => 블록
	   static 
	   {
		   try
		   {
			   // 파일 읽기
			   Reader reader=Resources.getResourceAsReader("Config.xml");
			   // XML 파싱 => 필요한 데이터를 저장한다 
			   ssf=new SqlSessionFactoryBuilder().build(reader);
		   }catch(Exception ex)
		   {
			   ex.printStackTrace();
		   }
	   }
	   
	   // 리스트 데이터
	   public static List<RecipeVO> recipeListData(Map map)
	   {
		   List<RecipeVO> list=new ArrayList<RecipeVO>();
		   SqlSession session=null;
		   try {
			   session=ssf.openSession();
			   list=session.selectList("recipeListData",map);
		   } catch (Exception e) {
			   e.printStackTrace();
		   } finally {
			   if(session!=null)
				   session.close();
		   }
		   return list;
	   }
	   
	   // 총페이지 구하기
	   public static int recipeTotalPage()
	   {
		   int total=0;
		   SqlSession session=null;
		   try {
			   session=ssf.openSession();
			   total=session.selectOne("recipeTotalPage");
		   } catch (Exception e) {
			   e.printStackTrace();
		   } finally {
			   if(session!=null)
				   session.close();
		   }
		   return list;
	   }
}
